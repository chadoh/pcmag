- title @meeting.question
%p= @meeting.when.strftime("A meeting held on %A, %d %B %Y at %I:%M %p")
- if editor?
  %p
    = link_to t('.edit'), edit_meeting_path(@meeting)

%h3 Attendance
%table
  %thead
    %tr
      %th Name
      %th Answer
      - if editor?
        %th
  %tbody
    - @meeting.attendances.each do |attendance|
      %tr{ :class => cycle(:odd, :even) }
        - if attendance.person
          %td= link_to attendance.person.name, person_path(attendance.person)
        - else
          %td= attendance.person_name
        %td= attendance.answer
        - if editor?
          %td= button_to 'remove', meeting_attendance_path(@meeting, attendance), :method => :delete, :class => 'link'

- if editor?
  = semantic_form_for [@meeting, Attendance.new] do |f|
    = f.semantic_errors
    = f.inputs do
      = f.input :meeting, :as => :hidden, :value => @meeting
      = f.input :person, :as => :string
      = f.input :answer
    = f.buttons do
      = f.commit_button

:javascript
  $(function(){
    $("#attendance_person").autocomplete("#{auto_complete_for_person_first_name_middle_name_last_name_email_people_path}");
  });
