= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
  = render :partial => 'error_messages'
  = f.input :email
  = f.input :first_name
  = f.input :middle_name
  = f.input :last_name
  - if params[:action] == 'new'
    = f.input :password
    = f.input :password_confirmation
  - else
    = f.input :password, :label => 'New password', :required => false
    = f.input :password_confirmation, :label => 'New password again'
    = f.input :current_password, :label => "Current password (if you're changing it)"
  = f.button :submit

:javascript
  $(function(){
    $("#person_email").focus();

    $("#person_first_name, #person_last_name").keyup(function(){
      $("span.name").html($("#person_first_name").val());
      if ($("#person_last_name").val() != "") {
        $("span.name").append(" " + $("#person_last_name").val());
      }
      $("#your_name_looks_like").fadeIn();
    });

  });
