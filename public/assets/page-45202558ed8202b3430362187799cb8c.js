$(function(){var e=200;$(".paginatable li.submission").draggable({handle:"span.drag-handle-wrap",zIndex:1,helper:function(){var s=$(this).find("header h2").clone().text();return s.length>20&&(s=s.substring(0,20)+"&hellip;"),$('<h2 class="nocaps"></h2>').html(s).css({width:e})},cursorAt:{left:e/2,top:-10},drag:function(e,s){e.pageX?s.position.left=e.pageX+15:console.log("event.pageX is "+e.pageX)}}),$(".pagination li.page").droppable({hoverClass:"drop-here",drop:function(e,s){var t=s.draggable,n=t.attr("id").split("_").pop(),a=$(this).text(),o=window.location.pathname.split("/"),i=o.splice(3,1,a);o=o.join("/"),console.info("Moving submission "+n+" to "+o),$.ajax({type:"PUT",dataType:"script",url:o+"/add_submission",data:{submission_id:n},beforeSend:function(){t.css("border-style","dotted")},success:function(){a==i?t.css("border-style","dashed").parents("ol").prepend(t):t.hide()},error:function(){t.addClass("error").removeAttr("style")}})}})});