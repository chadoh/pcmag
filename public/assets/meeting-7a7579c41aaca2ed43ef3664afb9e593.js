function submitScoreWithDelay(t){var e=$(t).closest("span"),a=e.attr("data-attendee")+e.attr("data-packlet");score_timers[a]||(t.submit(),score_timers[a]=setTimeout(function(){delete score_timers[a]},500))}var score_timers={};$(function(){$(document).on("focus blur","#attendee_person",function(t){t.type=="focusin"?$(this).autocomplete("/people/auto_complete_for_person_first_name_middle_name_last_name_email"):$(this).val()==""?$("span.name").html($(this).val().split(" ")[0].replace(/,/g,"")):$("span.name").html($(this).val().split(" ")[0].replace(/,/g,"")+"'s")}),$("ol.packlets.sortable").sortable({axis:"y",items:"li",handle:"span.drag-handle-wrap",update:function(t,e){li=e.item,packlet_id=li.attr("id").split("_")[1],$.ajax({type:"PUT",dataType:"script",url:"/packlets/"+packlet_id+"/update_position",data:{position:li.prevAll().length}})}}),$("div.scores-wrap").css({width:$("div.scores").length*55}),$("form.score input[type=submit]").hide(),$(".scores-wrap").on("mouseout blur","input[type=number]",function(){var t=$(this).attr("data-original"),e=$(this).val();t!=e&&submitScoreWithDelay($(this))}),$(document).on("ajax:before","form#new_attendee[data-remote]",function(){attendee_email=$(this).find("input#attendee_person").val().split(" ").pop(),$(this).attr("data-viewer")==attendee_email&&$(this).submit(),$(this).append("<img src='/assets/indicator.gif' class='indicator' alt='loading'/>")}).on("ajax:complete",function(){$(this).find("img.indicator").remove()})});